<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulir Pendaftaran Anggota Sinergi Ekonomi Krapyak</title>
    <link rel="icon" href="assets/logo_sinergi_krapyak.jpg" type="image/jpeg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <style>
        .mobile-search-trigger {
            display: none !important;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-wrapper">
            <a href="index.html" class="logo-link">
                <img src="assets/logo_sinergi_krapyak.jpg" alt="Logo Sinergi Krapyak" class="logo">
            </a>
            <div class="header-right">
                <nav class="main-nav">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="form.html" class="nav-link active">Isi Form</a>
                    <a href="statistik.html" class="nav-link">Statistik</a>
                    <a href="tentang.html" class="nav-link">Tentang</a>
                </nav>
                <div class="header-actions">
                    <button class="mobile-search-trigger" id="mobile-search-trigger" style="display: none !important;"></button>
                    <div class="mobile-menu-trigger" id="burger-menu-trigger">
                        <img src="assets/menu_kebab.svg" alt="Menu">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="menu-overlay" id="menu-overlay"></div>
    <nav class="main-nav" id="main-nav">
        <button class="nav-close-btn" id="nav-close-btn">&times;</button>
        <a href="index.html" class="nav-link">Home</a>
        <a href="form.html" class="nav-link active">Isi Form</a>
        <a href="statistik.html" class="nav-link">Statistik</a>
        <a href="tentang.html" class="nav-link">Tentang</a>
    </nav>

    <main class="container">
        <form id="data-form" class="form-container">
            <div class="form-header">
                <h1>Form Anggota</h1>
                <p>Ceritakan tentang Anda, ini akan membantu kita untuk saling bersinergi.</p>
            </div>

            <!-- Informasi Calon Anggota (Gabungan) -->
            <fieldset class="form-section">
                <legend class="form-section-title">Biodata Diri</legend>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="nama_lengkap">Nama Lengkap <span class="mandatory-star">*</span></label>
                        <div class="input-wrapper">
                            <input type="text" id="nama_lengkap" name="nama_lengkap" required maxlength="80">
                            <span class="clear-icon">&times;</span>
                        </div>
                        <div class="char-counter">0 / 80</div>
                    </div>
                    <div class="form-group">
                        <label for="nama_panggilan">Nama Panggilan</label>
                        <div class="input-wrapper">
                            <input type="text" id="nama_panggilan" name="nama_panggilan" maxlength="30">
                            <span class="clear-icon">&times;</span>
                        </div>
                        <div class="char-counter">0 / 30</div>
                    </div>
                     <div class="form-group">
                        <label for="alumni">Alumni <span class="mandatory-star">*</span></label>
                        <input type="text" id="alumni" name="alumni" value="Pondok Pesantren Krapyak Yogyakarta" disabled>
                    </div>
                    <div class="form-group">
                        <label for="th_masuk">Tahun Masuk <span class="mandatory-star">*</span></label>
                        <select id="th_masuk" name="th_masuk" required>
                            <option value="" disabled selected>Pilih Tahun</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="th_keluar">Tahun Keluar</label>
                        <select id="th_keluar" name="th_keluar">
                            <option value="" disabled selected>Pilih Tahun</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="komplek">Komplek <span class="mandatory-star">*</span></label>
                        <div class="input-wrapper">
                            <input type="text" id="komplek" name="komplek" required maxlength="30">
                             <span class="clear-icon">&times;</span>
                        </div>
                         <div class="char-counter">0 / 30</div>
                    </div>
                    <div class="form-group">
                        <label for="domisili">Domisili (Kota/Kabupaten) <span class="mandatory-star">*</span></label>
                        <select id="domisili" name="domisili" required>
                            <option value="" disabled selected>Memuat data...</option>
                        </select>
                    </div>
                    <div class="form-group form-group-full">
                        <label for="detail_alamat">Detail Alamat</label>
                        <div class="input-wrapper">
                            <textarea id="detail_alamat" name="detail_alamat" rows="3" placeholder="Contoh: Jl. KH Ahmad Dahlan No. 21, RT 04 RW 02..." maxlength="300"></textarea>
                            <span class="clear-icon">&times;</span>
                        </div>
                        <div class="char-counter">0 / 300</div>
                        <div class="field-privacy-switch">
                            <label class="switch">
                                <input type="checkbox" id="alamat_active" name="alamat_active" checked>
                                <span class="slider"></span>
                            </label>
                            <label for="alamat_active" class="switch-label">Tampilkan Alamat di Publik?</label>
                        </div>
                    </div>
                     <div class="form-group">
                        <label for="no_hp_anggota">No. HP (WhatsApp) <span class="mandatory-star">*</span></label>
                        <div class="phone-input-wrapper">
                            <span class="phone-prefix">+62</span>
                            <input type="tel" id="no_hp_anggota" name="no_hp_anggota" placeholder="81234567890" required pattern="[0-9]{9,13}">
                        </div>
                        <div class="field-privacy-switch">
                            <label class="switch">
                                <input type="checkbox" id="no_hp_active" name="no_hp_active" checked>
                                <span class="slider"></span>
                            </label>
                            <label for="no_hp_active" class="switch-label">Tampilkan No. HP di Publik?</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="profesi">Profesi Utama</label>
                         <select id="profesi" name="profesi">
                            <option value="" disabled selected>Memuat data...</option>
                        </select>
                    </div>
                     <div class="form-group form-group-full">
                        <label for="detail_profesi">Deskripsi Detail Profesi</label>
                        <div class="input-wrapper">
                            <textarea id="detail_profesi" name="detail_profesi" rows="3" placeholder="Contoh: Menjalankan usaha kuliner di Bandung, fokus pada makanan khas Jawa Tengah sejak 2018" maxlength="500"></textarea>
                            <span class="clear-icon">&times;</span>
                        </div>
                        <div class="char-counter">0 / 500</div>
                    </div>
                 <div class="form-group ai-group">
                    <label for="pengembangan_profesi">Rencana pengembangan profesi/keahlian</label>
                    <div class="input-wrapper">
                        <textarea id="pengembangan_profesi" name="pengembangan_profesi" rows="4" placeholder="Contoh: Ingin memperluas layanan ke bidang edukasi kesehatan masyarakat" maxlength="500"></textarea>
                        <span class="clear-icon">&times;</span>
                    </div>
                    <div class="char-counter">0 / 500</div>
                    <button type="button" class="ai-btn" data-target="pengembangan_profesi" aria-label="Generate dengan AI">✨</button>
                </div>
                <div class="form-group ai-group">
                    <label for="ide">Ide/gagasan untuk Sinergi Ekonomi Santri</label>
                    <div class="input-wrapper">
                        <textarea id="ide" name="ide" rows="4" placeholder="Tulis ide atau kontribusi Anda untuk pengembangan ekonomi santri..." maxlength="500"></textarea>
                        <span class="clear-icon">&times;</span>
                    </div>
                    <div class="char-counter">0 / 500</div>
                    <button type="button" class="ai-btn" data-target="ide" aria-label="Generate dengan AI">✨</button>
                </div>
                 <div class="form-group">
                    <label for="lain_lain">Lain-lain</label>
                     <div class="input-wrapper">
                        <textarea id="lain_lain" name="lain_lain" rows="3" placeholder="Informasi tambahan yang relevan..." maxlength="500"></textarea>
                        <span class="clear-icon">&times;</span>
                    </div>
                    <div class="char-counter">0 / 500</div>
                </div>
                </div>
            </fieldset>

            <!-- Bagian Usaha (Dinamis) -->
            <fieldset class="form-section">
                <legend class="form-section-title">Informasi Usaha (Opsional)</legend>
                <div id="business-list-container">
                    <!-- Blok usaha akan ditambahkan di sini oleh JS -->
                </div>
                <button type="button" id="add-business-btn" class="add-btn"><i class="fas fa-plus-circle"></i> Tambah Usaha</button>
            </fieldset>

            <div class="form-actions">
                <button type="reset" class="btn btn-secondary">Reset</button>
                <button type="submit" class="btn btn-primary">Kirim Data</button>
            </div>
        </form>
    </main>

    <!-- TEMPLATE UNTUK BLOK USAHA -->
    <template id="business-entry-template">
        <div class="business-entry-card">
            <button type="button" class="remove-btn remove-business-btn" aria-label="Hapus Usaha">&times;</button>
            <div class="form-grid">
                <div class="form-group form-group-full">
                    <label>Nama Usaha</label>
                    <input type="text" name="nama_usaha" required>
                </div>
                <div class="form-group">
                    <label>Kategori Usaha</label>
                    <input type="text" name="kategori_usaha">
                </div>
                <div class="form-group">
                    <label>Jenis Usaha</label>
                    <input type="text" name="jenis_usaha">
                </div>
                <div class="form-group form-group-full">
                    <label>Detail/Deskripsi Usaha</label>
                    <textarea name="detail_usaha" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>URL Google Maps</label>
                    <input type="url" name="url_gmaps_perusahaan" placeholder="https://maps.app.goo.gl/...">
                </div>
            </div>
            
            <!-- Sub-section untuk Toko Online -->
            <div class="sub-section">
                <h4 class="sub-section-title">Toko Online (Marketplace)</h4>
                <div class="shop-list-container">
                    <!-- Isian toko online akan ditambahkan di sini -->
                </div>
                <button type="button" class="add-btn add-shop-btn"><i class="fas fa-plus"></i> Tambah Toko</button>
            </div>

            <!-- Sub-section untuk Media Sosial -->
            <div class="sub-section">
                <h4 class="sub-section-title">Media Sosial</h4>
                <div class="social-list-container">
                    <!-- Isian media sosial akan ditambahkan di sini -->
                </div>
                <button type="button" class="add-btn add-social-btn"><i class="fas fa-plus"></i> Tambah Sosmed</button>
            </div>
        </div>
    </template>

    <!-- TEMPLATE UNTUK ISIAN TOKO ONLINE/SOSMED -->
    <template id="link-entry-template">
        <div class="link-entry">
            <div class="form-group">
                <label>Platform</label>
                <select name="platform">
                    <option value="">Pilih Platform</option>
                    <optgroup label="Toko Online">
                        <option value="Shopee">Shopee</option>
                        <option value="Tokopedia">Tokopedia</option>
                        <option value="Lazada">Lazada</option>
                        <option value="TikTok Shop">TikTok Shop</option>
                        <option value="Blibli">Blibli</option>
                    </optgroup>
                    <optgroup label="Media Sosial">
                        <option value="Instagram">Instagram</option>
                        <option value="Facebook">Facebook</option>
                        <option value="TikTok">TikTok</option>
                        <option value="Website">Website</option>
                        <option value="YouTube">YouTube</option>
                    </optgroup>
                    <option value="Lainnya">Lainnya</option>
                </select>
            </div>
            <div class="form-group">
                <label>URL</label>
                <input type="url" name="url" placeholder="https://..." required>
            </div>
            <button type="button" class="remove-btn remove-link-btn" aria-label="Hapus">&times;</button>
        </div>
    </template>
    
    <!-- Modal Konfirmasi -->
    <div id="confirmation-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h2>Konfirmasi Data</h2>
            <p>Mohon periksa kembali data yang Anda masukkan sebelum mengirim.</p>
            <div id="modal-preview-grid" class="modal-preview-grid">
                <!-- Data preview akan disisipkan di sini -->
            </div>
            <div class="modal-button-group">
                <button type="button" id="modal-edit-btn" class="btn btn-secondary">Edit Kembali</button>
                <button type="button" id="modal-submit-btn" class="btn btn-primary">Ya, Kirim Sekarang</button>
            </div>
        </div>
    </div>
    
    <!-- Modal Status Pengiriman -->
    <div id="status-modal" class="modal-overlay" style="display:none;">
         <div class="modal-content">
             <div id="submission-loading">
                <div class="spinner"></div>
                <p>Mengirim data...</p>
             </div>
             <div id="submission-success" style="display:none;">
                <i class="fas fa-check-circle success-icon"></i>
                <h2>Terima Kasih!</h2>
                <p>Data Anda telah berhasil dikirim.</p>
                <a href="index.html" class="btn btn-primary">Kembali ke Direktori</a>
             </div>
             <div id="submission-error" style="display:none;">
                <i class="fas fa-times-circle error-icon"></i>
                <h2>Gagal Mengirim</h2>
                <p>Terjadi kesalahan. Silakan coba lagi nanti.</p>
                <button type="button" id="error-close-btn" class="btn btn-secondary">Tutup</button>
             </div>
         </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="form.js"></script>
    <script src="main.js"></script>
</body>
</html> 
